# Trail Filter Service

### Project Overview

Trail Filter Service is a Spring WebFlux-based REST API that provides filtering functionality for trail data.
This service allows users to filter trails by specific criteria, such as trail type (bike or walking) and fishing availability. 
It loads trail data from a CSV file (BoulderTrailHeads.csv) and provides efficient, reactive endpoints for real-time filtering.


### Design Decision

#### Reactive Programming with Spring WebFlux
**Tech Stack**
- **Spring WebFlux**: Supports a reactive, non-blocking, event-driven architecture that optimizes resource utilization, making it especially suitable for high-traffic environments and for scaling and extending the service.
- **SpringDoc**: Provides Swagger UI for interacting with endpoints and documenting API details, including query parameters, request formats, and response examples.
- **Gradle**: Manages the build process, handling tasks from compilation and packaging to testing, dependency management, and project execution.

**Tradeoff**
- **Cache Utility**: Upon startup, the service loads trail data from the CSV file into memory as a cache. This approach speeds up request processing by eliminating the need to read from the file repeatedly. 
However, it currently uses a simple in-memory `List` as the cache and does not implement external caching solutions like Redis or handle cache refresh and synchronization scenarios due to time constraints.


### Running the Project

#### Prerequisites: Java 17 or higher

#### Build and Run:
1. Open a command prompt/terminal, navigate to the root directory of the project (`trail-filter-service/`).
2. Build the project.
3. Run the project.

| Operating System | Build Command            | Run Command            |
|------------------|--------------------------|-------------------------|
| **Windows**      | `gradlew build`          | `gradlew bootRun`      |
| **Linux**        | `./gradlew build`        | `./gradlew bootRun`    |


### REST API

1. **Direct Access via Browser**:
    - **URL**: [http://localhost:8080/trails?trailType=BIKE&fishing=false](http://localhost:8080/trails?trailType=BIKE&fishing=false)
    - **Parameters**:
        - **trailType** (required): Accepted values are `BIKE` and `WALKING`.
            - `BIKE`: Returns trails where `bikeTrail` is `true`.
            - `WALKING`: Returns trails that are not designated as horse trails (`horseTrail` column does not contain `"designated"`).
        - **fishing** (optional): Filters based on the `"fishing"` column. Setting `fishing=false` will return trails without fishing availability.

2. **Swagger UI**:
    - **URL**: [http://localhost:8080/swagger-ui.html](http://localhost:8080/swagger-ui.html)
    - Provides interactive API documentation. Use the "Try it out" feature to call the endpoint directly from the UI (auto generated by srping opendoc).
   
### Future Enhancements

* **Database Integration**: For larger or dynamic datasets, migrating from CSV or persists them to a database such as PostgreSQL or MongoDB would enhance scalability and manageability.
* **Additional Filters**: Extend filtering options to include criteria like `restRoom`, `picnic`, or specific trail classes.
* **Open Data Integration**: Enable direct interaction with external data sources, such as Boulder County’s geospatial open data, if an API is provided.
* **Automated Data Updates**: Develop a separate microservice (e.g., `trail-data-updater`) to periodically check for updates in Boulder County’s trail data and send updates to `trail-filter-service`.
* **Real-Time Streaming with Kafka**: For more complex use cases involving multiple data sources or consumers, implementing a Kafka-based streaming platform could provide a robust, real-time data processing solution.